DROP DATABASE IF EXISTS QUANLYTHITUYENSINH;
CREATE DATABASE QUANLYTHITUYENSINH;

USE QUANLYTHITUYENSINH;

CREATE TABLE MONTHI(
	MON VARCHAR(6) NOT NULL UNIQUE,
    HESO INT,
    GHICHU VARCHAR(50),
    
    CONSTRAINT MONTHI_PK PRIMARY KEY(MON)
);

CREATE TABLE THISINH (
	SOBD CHAR(5),
	HOTEN VARCHAR(50), 
    NGAYSINH DATE,
    NOISINH VARCHAR(20),
	LOPCH VARCHAR(6),
    
	CONSTRAINT THISINH_PK PRIMARY KEY (SOBD),
	CONSTRAINT THISINH_LOPCH_FK FOREIGN KEY(LOPCH) REFERENCES MONTHI(MON)
);

CREATE TABLE KETQUA(
	SOBD CHAR(5),
    MON VARCHAR(6),
    DIEM INT,
    
    CONSTRAINT KETQUA_PK PRIMARY KEY(SOBD,MON),
    CONSTRAINT KETQUA_SOBD_FK FOREIGN KEY(SOBD) REFERENCES THISINH(SOBD),
	CONSTRAINT KETQUA_MON_FK FOREIGN KEY(MON) REFERENCES MONTHI(MON)
);

# THÊM DỮ LIỆU VÀO BẢNG MONTHI
INSERT INTO MONTHI VALUES 
('TIN',2,'Môn chuyên cho lớp chuyên TIN'),
('TOAN',2,'Môn chung cho tất cả thí sinh'),
('VAN',1,'Môn chung cho tất cả thí sinh'),
('TOANCH',2,'Môn chuyên cho lớp chuyên TOAN'),
('VANCH',2,'Môn chuyên cho lớp chuyên VAN');


# THÊM DỮ LIỆU VÀO BẢNG THISINH
INSERT INTO THISINH VALUES
('19101', 'Nguyễn Lan Anh', '2005-02-16','HCM','TIN'),
('19102', 'Lê Hoài Thương', '2005-04-21','HCM','TIN'),
('19103', 'Nguyễn Trung Hiếu', '2005-06-08','HCM','VANCH'),
('19104', 'Phạm Minh Chính', '2005-07-11','Long An','VANCH'),
('19105', 'Lê Phước Hậu', '2005-11-29','Long An','TOANCH'),
('19106', 'Bùi Thị Trọng', '2005-12-14','Cần Thơ','TOANCH');


# THÊM DỮ LIỆU VÀO BẢNG KETQUA
INSERT INTO KETQUA VALUES 
('19101','TIN',10),
('19101','TOAN',5),
('19101','VAN',8),
('19102','TIN',10),
('19102','TOAN',8),
('19102','VAN',10),
('19103','TOAN',2),
('19103','VAN',2),
('19103','VANCH',1),
('19104','TOAN',0),
('19104','VAN',0),
('19104','VANCH',0),
('19105','TOAN',10),
('19105','TOANCH',10),
('19105','VAN',8),
('19106','TOAN',6),
('19106','TOANCH',4),
('19106','VAN',5);




# ...


